  image: maven:3-jdk-10
  variables:
    SONAR_URL: "http://jenkins-immersive.stackroute.in:9000/"
    SONAR_LOGIN: "admin"
    SONAR_PASSWORD: "Admin12#"


  stages:
  - build
  - test
  - package
  - test-quality

  sonarqube_master_job:
    stage: test_quality
    only:
    - v1.0.0
    image: maven:3-jdk-10
    script:
    - mvn --batch-mode verify sonar:sonar -Dsonar.host.url=$SONAR_URL -Dsonar.login=$SONAR_LOGIN -Dsonar.password=$SONAR_PASSWORD

  maven-build:
    image: maven:3-jdk-10
    stage: package
    script: "mvn package"
    artifacts:
      paths:
      - /target/*.jar



